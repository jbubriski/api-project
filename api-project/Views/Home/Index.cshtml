@{
    ViewBag.Title = "Find Images Near You!";
}

<div class="jumbotron">
    <h1>@ViewBag.Title</h1>
</div>

<div class="row">
    <div class="col-md-4">
        <p data-bind="visible: city()">It looks like you live in or near <span data-bind="text: location"></span></p>
    </div>
    <div class="col-md-4">
    </div>
    <div class="col-md-4">
        All images found on Flickr, licensed under the <a href="https://creativecommons.org/licenses/by-sa/2.0/">Attribution-ShareAlike 2.0 Generic License (CC BY-SA 2.0)</a> (<a href="https://creativecommons.org/licenses/by-sa/2.0/legalcode">Full license text</a>).
    </div>
</div>

<h2 data-bind="visible: pictures().length == 0 && !requestMade">Finding Images Near You...</h2>
<h2 style="display: none" data-bind="visible: pictures().length == 0 && requestMade">No Images Found Near You!?</h2>
<h2 style="display: none" data-bind="visible: pictures().length > 0 && requestMade">We Found Some Images Near You...</h2>

<div id="container" data-bind="foreach: pictures">
    <div class="picture">
        <div class="front">
            <img data-bind="attr: { src: $root.pictureUrl($data), alt: title }" class="img-thumbnail" />
        </div>
        <div class="back">
            <br />
            <a data-bind="attr: { href: $root.picturePageUrl($data) }">View image on Flickr</a>
            <br />
            <a data-bind="attr: { href: $root.userUrl($data) }">View user on Flickr</a>
        </div>
    </div>
</div>

@section scripts
{
    <script type="text/javascript">
        var locationEndpoint = '@Url.Action("GetLocationInfo", "Home")';
        var picturesEndpoint = '@Url.Action("GetPicturesNearMe", "Home")';
    </script>
    @Scripts.Render("~/bundles/home")
}